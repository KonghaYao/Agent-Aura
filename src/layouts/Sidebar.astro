---
import UserAvatar from "../../components/UserAvatar";
const navigation = [
    {
        name: "Aura",
        path: "/",
        icon: "ğŸŒŸ",
        description: "AI Agent Platform"
    },
    {
        name: "Agent Store",
        path: "/agent-store",
        icon: "ğŸ¤–",
        description: "æµè§ˆå’Œåˆ›å»ºä»£ç†"
    },
    {
        name: "Agent Chat",
        path: "/agent",
        icon: "ğŸ’¬",
        description: "ä¸AIä»£ç†å¯¹è¯"
    },
    {
        name: "Files",
        path: "/files",
        icon: "ğŸ“‚",
        description: "æ–‡ä»¶ç®¡ç†"
    }
];

const currentPath = Astro.url.pathname;
---

<!-- Sidebar -->
<aside class="group/sidebar bg-sidebar border-sidebar-border border-r w-16 hover:w-64 transition-all duration-300 ease-in-out h-screen flex flex-col shadow-sm overflow-hidden">
    <!-- Logo Section -->
    <div class="flex items-center justify-center h-16 px-4 border-b border-sidebar-border">
        <div class="flex items-center gap-3 min-w-0">
            <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center shrink-0">
                <span class="text-primary-foreground font-bold text-lg">A</span>
            </div>
            <div class="hidden group-hover/sidebar:block transition-opacity duration-200">
                <h1 class="text-sidebar-foreground font-semibold text-lg truncate">
                    Agent Aura
                </h1>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 px-3 py-6">
        <ul class="space-y-2">
            {navigation.map((item) => (
                <li>
                    <a
                        href={item.path}
                        class:list={[
                            "flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-200 group/nav-item relative",
                            currentPath === item.path
                                ? "bg-sidebar-accent text-sidebar-accent-foreground shadow-sm"
                                : "text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"
                        ]}
                        title={item.description}
                    >
                        <!-- Active Indicator -->
                        {currentPath === item.path && (
                            <div class="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-primary rounded-r-full"></div>
                        )}

                        <!-- Icon -->
                        <div class="flex items-center justify-center w-6 h-6 shrink-0 text-xl group-hover/nav-item:scale-110 transition-transform duration-200">
                            {item.icon}
                        </div>

                        <!-- Label -->
                        <span class="hidden group-hover/sidebar:block text-sm font-medium truncate transition-opacity duration-200">
                            {item.name}
                        </span>

                        <!-- Tooltip for collapsed state -->
                        <div class="group-hover/sidebar:hidden absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-lg opacity-0 group-hover/nav-item:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50">
                            {item.description}
                        </div>
                    </a>
                </li>
            ))}
        </ul>
    </nav>

    <!-- Footer -->
    <div class="p-3 border-t border-sidebar-border">
       <UserAvatar client:visible show-name={true} show-email={true}></UserAvatar>
    </div>
</aside>

<!-- Mobile Overlay (for future mobile support) -->
<div class="fixed inset-0 bg-black/50 -translate-x-full lg:hidden" id="mobile-overlay"></div>

---
import UserAvatar from "../../components/UserAvatar";
import { Sparkles, Bot, MessageCircle, Folder } from "lucide-react";

const navigation = [
    {
        name: "Aura",
        path: "/",
        icon: Sparkles,
        description: "AI Agent Platform"
    },
    {
        name: "Agent Store",
        path: "/agent-store",
        icon: Bot,
        description: "浏览和创建代理"
    },
    {
        name: "Agent Chat",
        path: "/agent",
        icon: MessageCircle,
        description: "与AI代理对话"
    },
    {
        name: "Files",
        path: "/files",
        icon: Folder,
        description: "文件管理"
    }
];

const currentPath = Astro.url.pathname;
---

<!-- Sidebar -->
<aside class="bg-sidebar border-sidebar-border border-r w-64 h-screen flex flex-col shadow-sm overflow-hidden">
    <!-- Logo Section -->
    <div class="flex items-center justify-center h-16 px-4 border-b border-sidebar-border">
        <div class="flex items-center gap-3 min-w-0">
            <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center shrink-0">
                <span class="text-primary-foreground font-bold text-lg">A</span>
            </div>
            <div class="block">
                <h1 class="text-sidebar-foreground font-semibold text-lg truncate">
                    Agent Aura
                </h1>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 px-3 py-6">
        <ul class="space-y-2">
            {navigation.map((item) => (
                <li>
                    <a
                        href={item.path}
                        class:list={[
                            "flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-200 group/nav-item relative",
                            currentPath === item.path
                                ? "bg-sidebar-accent text-sidebar-accent-foreground shadow-sm"
                                : "text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"
                        ]}
                        title={item.description}
                    >
                        <!-- Active Indicator -->
                        {currentPath === item.path && (
                            <div class="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-primary rounded-r-full"></div>
                        )}

                        <!-- Icon -->
                        <div class="flex items-center justify-center w-6 h-6 shrink-0">
                            <item.icon className="w-5 h-5" />
                        </div>

                        <!-- Label -->
                        <span class="block text-sm font-medium truncate">
                            {item.name}
                        </span>
                    </a>
                </li>
            ))}
        </ul>
    </nav>

    <!-- Footer -->
    <div class="p-3 border-t border-sidebar-border">
       <UserAvatar client:only="react" ></UserAvatar>
    </div>
</aside>

<!-- Mobile Overlay (for future mobile support) -->
<div class="fixed inset-0 bg-black/50 -translate-x-full lg:hidden" id="mobile-overlay"></div>
